<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS v5.2.1 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
      crossorigin="anonymous"
    />

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <script>
      var url = "https://paginas-web-cr.com/ApiPHP/apis/ListaCurso.php";

      $(document).ready(function () {
        cargarDatosDeLosCursos();
      });

      function cargarDatosDeLosCursos() {
        $.ajax({
          type: "GET",
          url: url,
          dataType: "json",
          success: function (response) {
            ajustardatostabla(response.data);
            // console.log(response);
          },
          error: function (xhr, textStatus, errorThrown) {
            console.log("Error ", errorThrown);
          },
        });
      }

      //         function consultardatos(){
      //     //fetch sirve para extraer, insertar modificar, eliminar consultardatos,
      //     apiurl = apibase + apiconsultar ;
      //     fetch(apiurl)
      //     .then(estructura => estructura.json())
      //     .then((datosrespuesta) => {
      //             //ajustardatostabla
      //             console.log(datosrespuesta.code)
      //             console.log(datosrespuesta.data)
      //             ajustardatostabla(datosrespuesta.data)
      //         })
      //     .catch(console.log);
      // }

      function ajustardatostabla(datos) {
        console.log("datos" + datos);
        for (const objetoindividual of datos) {
          tablaresultado.innerHTML += `
            <tr class="table-primary">
              <td scope="row">${objetoindividual.id}</td>
              <td>${objetoindividual.nombre}</td>
              <td>${objetoindividual.descripcion}</td>
              <td>${objetoindividual.tiempo}</td>
              <td>${objetoindividual.usuario}</td>
              <td>
                  <a name="Editar" id="Editar" class="btn btn-success" role="button" onclick="mostrarEditarModal('${objetoindividual.id}','${objetoindividual.nombre}','${objetoindividual.descripcion}','${objetoindividual.tiempo}')">Editar</a>
                  ||
                  <a name="Eliminar" id="Eliminar" class="btn btn-danger" role="button" onclick="mostrarModal('${objetoindividual.id}')">Eliminar</a>
              </td>                              
            </tr>
       `;
        }
      }

      function crearCurso() {
        var formulario = {
          nombre: nombre,
          descripcion: descripcion,
          tiempo: tiempo,
          usuario: "Brandon y Jaz",
        };
        // Asynchronous JavaScript and XML
        $.ajax({
          type: "POST",
          url: url,
          dataType: "json",
          data: JSON.stringify(formulario),
          success: (response) => {},
          error: function (xhr, textStatus, errorThrown) {
            console.error("Error al hacer POST al " + url, errorThrown);
          },
        });



        //1.obtener los valores del input por medio de funciones de jquery, ya no se usa el documentgetelementid
        //2.Crear un objeto donde se puedan agregar estos valores
        //3.

        // objeto = {
        //     nombre: nombre
        //     descripcion: descripcion
        // }

        $.ajax({
          type: "method",
          url: "url",
          data: objeto,
          dataType: "dataType",
          success: function (response) {},
        });
      }
    </script>
  </head>

  <body>
    <header>
      <!-- place navbar here -->
    </header>
    <main>
      <div class="container">
        <form id="formulario">
          <div class="mb-3">
            <label for="" class="form-label">Nombre</label>
            <input
              required
              type="text"
              class="form-control"
              name="nombre"
              id="nombre"
              aria-describedby="helpId"
              placeholder="Ingresa el nombre"
            />
            <small id="helpId" class="form-text text-muted">Nombre</small>
          </div>
          <div class="mb-3">
            <label for="" class="form-label">Descripcion</label>
            <input
              required
              type="text"
              class="form-control"
              name="descripcion"
              id="descripcion"
              aria-describedby="helpId"
              placeholder="Descripcion"
            />
            <small id="helpId" class="form-text text-muted">Descripcion</small>
          </div>
          <div class="mb-3">
            <label for="" class="form-label">Tiempo</label>
            <input
              required
              type="text"
              class="form-control"
              name="tiempo"
              id="tiempo"
              aria-describedby="helpId"
              placeholder="Ingresa tiempo"
            />
            <small id="helpId" class="form-text text-muted">Tiempo</small>
          </div>
          <button type="reset" class="btn btn-success">Reset</button>

          <button type="submit" class="btn btn-info">Enviar</button>
        </form>
      </div>

      <!-- Modal Body -->
      <!-- if you want to close by clicking outside the modal, delete the last endpoint:data-bs-backdrop and data-bs-keyboard -->
      <div
        class="modal fade"
        id="modalSuccess"
        tabindex="-1"
        data-bs-backdrop="static"
        data-bs-keyboard="false"
        role="dialog"
        aria-labelledby="modalTitleId"
        aria-hidden="true"
      >
        <div
          class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-sm"
          role="document"
        >
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="modalTitleId">
                Modal Complete Success
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">Ingreso exitoso</div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-outline-secondary"
                data-bs-dismiss="modal"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer>
      <!-- place footer here -->
    </footer>
    <!-- Bootstrap JavaScript Libraries -->
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
      integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
